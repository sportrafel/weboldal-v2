---
import Layout from '../layouts/Layout.astro';
import ContextAlert from '../components/ContextAlert.astro';
import Markdown from '../components/Markdown.astro';

const explainer = `
Az oldal fejlesztés alatt... Kérjük szíves türelmedet!
`;
---
<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galéria – Képek & YouTube videók</title>
  <meta name="description" content="Reszponzív, gyors galéria képekkel és YouTube beágyazásokkal. Netlify/GitHub Pages kompatibilis – egyetlen HTML fájl." />
  <style>
    :root {
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #98a2b3;
      --text: #e6e7eb;
      --accent: #4f46e5;
      --radius: 16px;
      --gap: 16px;
      --shadow: 0 6px 30px rgba(0,0,0,.35);
    }
    html, body { height: 100%; }
    body {
      margin: 0; font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1a1f2d 0%, #0b0c10 55%);
    }
    header {
      position: sticky; top: 0; z-index: 20;
      backdrop-filter: saturate(1.3) blur(8px);
      background: linear-gradient(180deg, rgba(17,19,24,.9), rgba(17,19,24,.6));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 20px; }
    h1 { margin: 0 0 8px; font-size: clamp(22px, 2vw + 12px, 36px); letter-spacing: .3px; }
    .sub { color: var(--muted); margin: 0 0 12px; }

    .toolbar {
      display: flex; flex-wrap: wrap; align-items: center; gap: 10px; margin: 10px 0 0;
    }
    .btn {
      border: 1px solid rgba(255,255,255,.08);
      background: #0f1220;
      color: var(--text);
      padding: 8px 12px; border-radius: 999px; cursor: pointer; user-select: none;
    }
    .btn[aria-pressed="true"] { background: var(--accent); border-color: var(--accent); }

    main { padding: 24px 0 80px; }

    .gallery {
      display: grid; grid-template-columns: repeat(12, 1fr); gap: var(--gap);
    }
    @media (max-width: 900px) { .gallery { grid-template-columns: repeat(6, 1fr); } }
    @media (max-width: 600px) { .gallery { grid-template-columns: repeat(4, 1fr); } }

    .card {
      grid-column: span 4; /* default */
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      overflow: hidden; box-shadow: var(--shadow);
      transition: transform .15s ease, box-shadow .2s ease;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,.45); }

    /* Make some cards larger by adding .wide or .tall if you want */
    .card.wide { grid-column: span 6; }

    .thumb, .video-wrap { position: relative; width: 100%; aspect-ratio: 16 / 9; background: #0d0f16; }

    .thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .video-wrap iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

    .meta { padding: 10px 12px 12px; }
    .title { font-weight: 600; font-size: 15px; margin: 2px 0 4px; }
    .desc { color: var(--muted); font-size: 13px; margin: 0; }

    .tag { font-size: 12px; color: #c7d2fe; background: rgba(79,70,229,.15); border: 1px solid rgba(79,70,229,.35); padding: 2px 8px; border-radius: 999px; }

    /* Lightbox */
    dialog#lightbox { width: min(92vw, 1100px); border: 1px solid rgba(255,255,255,.08); background: #0b0c10; padding: 0; border-radius: 14px; }
    .lb-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; border-bottom: 1px solid rgba(255,255,255,.08); }
    .lb-body { padding: 0; }
    .lb-img { width: 100%; height: auto; display: block; }
    .iconbtn { background: transparent; border: 1px solid rgba(255,255,255,.16); color: var(--text); border-radius: 10px; padding: 6px 10px; cursor: pointer; }

    footer { color: var(--muted); text-align: center; padding: 30px 0; }
    a { color: #c7d2fe; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Galéria</h1>
      <p class="sub">Képek és YouTube-videók egy helyen. Reszponzív, gyors, SEO‑barát.</p>
      <div class="toolbar" role="toolbar" aria-label="Szűrők">
        <button class="btn" data-filter="all" aria-pressed="true">Összes</button>
        <button class="btn" data-filter="image" aria-pressed="false">Képek</button>
        <button class="btn" data-filter="video" aria-pressed="false">Videók</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="gallery" id="gallery" aria-live="polite">

      <!-- ▼▼▼ MINTA KÁRTYÁK – Cseréld a tartalmat sajátodra ▼▼▼ -->

      <!-- YouTube videó (privacy-enhanced) -->
      <article class="card wide" data-type="video">
        <div class="video-wrap" data-yt-id="dQw4w9WgXcQ" aria-label="YouTube lejátszó"></div>
        <div class="meta">
          <span class="tag">YouTube</span>
          <h3 class="title">Minta videó címe</h3>
          <p class="desc">Rövid leírás a videóról.</p>
        </div>
      </article>

      <!-- Kép kártya (lightbox) -->
      <article class="card" data-type="image">
        <button class="thumb" data-lightbox-src="assets/photo-1-large.jpg" aria-label="Kép megnyitása nagyban">
          <img src="assets/photo-1.jpg" alt="Tájkép naplementében" loading="lazy" width="800" height="450" />
        </button>
        <div class="meta">
          <span class="tag">Fotó</span>
          <h3 class="title">Naplemente a hegyekben</h3>
          <p class="desc">Saját leírás, CC‑0/stock jelölés opció.</p>
        </div>
      </article>

      <!-- YouTube videó -->
      <article class="card" data-type="video">
        <div class="video-wrap" data-yt-id="ysz5S6PUM-U" aria-label="YouTube lejátszó"></div>
        <div class="meta">
          <span class="tag">YouTube</span>
          <h3 class="title">Rövid tutorial</h3>
          <p class="desc">Reszponzív beágyazás aspect-ratio használattal.</p>
        </div>
      </article>

      <!-- Kép kártya (lightbox) -->
      <article class="card" data-type="image">
        <button class="thumb" data-lightbox-src="assets/photo-2-large.jpg" aria-label="Kép megnyitása nagyban">
          <img src="assets/photo-2.jpg" alt="Makró fotó egy levélről" loading="lazy" width="800" height="450" />
        </button>
        <div class="meta">
          <span class="tag">Fotó</span>
          <h3 class="title">Őszi levelek</h3>
          <p class="desc">Rövid képleírás (alt szöveg + leírás SEO‑hoz).</p>
        </div>
      </article>

      <!-- ▲▲▲ MINTA KÁRTYÁK VÉGE ▲▲▲ -->

    </section>
  </main>

  <!-- Lightbox modal a képekhez -->
  <dialog id="lightbox" aria-label="Nagyított kép">
    <div class="lb-header">
      <span id="lb-title">Megnyitott kép</span>
      <button class="iconbtn" id="lb-close" aria-label="Bezárás">Bezár</button>
    </div>
    <div class="lb-body">
      <img class="lb-img" id="lb-img" alt="Nagyított kép" />
    </div>
  </dialog>

  <footer>
    <div class="wrap">
      <small>© <span id="year"></span> – Statikus galéria. Hostolható Netlify‑on vagy GitHub Pages‑en.</small>
    </div>
  </footer>

  <script>
    // év frissítés
    document.getElementById('year').textContent = new Date().getFullYear();

    // YouTube beágyazók: csak akkor töltünk be iframe-et, amikor a DOM kész
    const ytDivs = document.querySelectorAll('.video-wrap[data-yt-id]');
    ytDivs.forEach(el => {
      const id = el.getAttribute('data-yt-id');
      const iframe = document.createElement('iframe');
      iframe.setAttribute('allowfullscreen', '');
      iframe.setAttribute('loading', 'lazy');
      iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
      iframe.src = `https://www.youtube-nocookie.com/embed/${id}`;
      el.appendChild(iframe);
    });

    // Lightbox képekhez
    const dlg = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const lbTitle = document.getElementById('lb-title');
    const closeBtn = document.getElementById('lb-close');

    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-lightbox-src]');
      if (btn) {
        const src = btn.getAttribute('data-lightbox-src');
        const title = btn.closest('.card')?.querySelector('.title')?.textContent?.trim() || 'Kép';
        lbImg.src = src;
        lbImg.alt = title;
        lbTitle.textContent = title;
        dlg.showModal();
      }
    });
    closeBtn.addEventListener('click', () => dlg.close());
    dlg.addEventListener('click', (e) => { if (e.target === dlg) dlg.close(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && dlg.open) dlg.close(); });

    // Szűrés (Összes / Képek / Videók)
    const toolbarBtns = document.querySelectorAll('.toolbar .btn');
    const gallery = document.getElementById('gallery');
    toolbarBtns.forEach(b => b.addEventListener('click', () => {
      toolbarBtns.forEach(x => x.setAttribute('aria-pressed', 'false'));
      b.setAttribute('aria-pressed', 'true');
      const filter = b.dataset.filter;
      [...gallery.children].forEach(card => {
        const type = card.getAttribute('data-type');
        const show = filter === 'all' || filter === type;
        card.style.display = show ? '' : 'none';
      });
    }));
  </script>
</body>
</html>
